{"title":"案例：当当网 Python 类图书销售数据分析","markdown":{"yaml":{"title":"案例：当当网 Python 类图书销售数据分析"},"headingText":"背景","containsRefs":false,"markdown":"\n\n\n\n\n\n\n\n我想写一本有关 Python 应用的书。目前我有很多想法，拿不定主意。比如，\n\n- 目标读者是谁？经管类博士生，还是中小学生？\n- 书的内容是什么？是 Python 基础知识，还是 Python 数据分析？亦或是机器学习？\n- 书的形式是什么？是电子书，还是纸质书？亦或是两者都有？\n- 书的价格是多少？是 50 元，还是 100 元？亦或是 200 元？\n- 找哪家出版社？\n\n在不了解这些信息的情况下，贸然画一年的时间写一本书是一个非常冒险的决定。为了降低风险，我决定先做一些市场调研，看看读者对 Python 书籍的需求。\n\n我先通过百度搜索和 Google 搜索，了解到当当网是中国最大的图书销售网站之一，拥有丰富的图书数据。我决定从当当网获取一些 Python 类图书的销售数据，进行分析，看看读者对 Python 书籍的需求。\n\n问题来了，我只有一些非常基础的 Python 知识 (大体上限于能对着课本或帮助文档提供的实例进行一些微小的修改，然后运行)。而且，我目前掌握的 Python 知识基本上进局限于回归分析。对于网络爬虫、数据分析、数据可视化等知识，我几乎一无所知。\n\n我听说 ChatGPT, DeepSeek 等 AI 工具可以帮助我完成一些复杂的任务，比如网络爬虫、数据分析、数据可视化等。我决定试试这些工具，看看它们能否帮助我完成我的市场调研。\n\n\n\n于是，我写一个提示词，发给了 ChatGPT：\n\n> [与 ChatGPT 的完整对话](https://chatgpt.com/share/6825d453-524c-8005-b82c-a9530cf983ff)\n\n\n::: {.callout-tip}\n### 提示词\n\n```md\n- 目的：从当当网获取Python相关书籍的销售量信息，最终输出一份市场调研报告。\n- 语言：Python\n- 网站：[https://search.dangdang.com/](https://search.dangdang.com/)\n- 关键词：'python'\n- 排序关键词：'销量'\n- 排序方式：从高到低\n- 信息条数：前 20 条\n- 目前搜索结果页面URL：[https://search.dangdang.com/?key=python\\&act=input\\&sort\\_type=sort\\_sale\\_amt\\_desc#J\\_tab](https://search.dangdang.com/?key=python&act=input&sort_type=sort_sale_amt_desc#J_tab)\n\n- 预期输出： \n  - 书名，作者，年份，出版社，评论数，原价、折后价\n\n以上是我目前想到的。\n请帮我做一个全面的规划，包括分析目标、收集那些变量，分析流程，以及最终的报告形式、核心内容等。\n```\n\n:::\n\n以下是 ChatGPT 的回复：\n\n::: {.callout-note}\n### AI 的回复\n\n好的，以下是一份较为系统的规划方案，适用于以 Python 编写程序从当当网采集“Python”相关书籍的销售量数据，并撰写一份结构完整的市场调研报告。\n\n---\n\n# Python 相关图书市场调研项目规划\n\n## 一、分析目标\n\n* **核心问题**：当前在当当网上热销的 Python 图书有哪些？主要出版时间集中在哪些年份？哪些出版社主导了市场？\n* **业务用途**：\n\n  * 为出版商、培训机构、书店提供选书参考；\n  * 了解当前市场偏好（入门/进阶、编程/数据分析/人工智能）；\n  * 为课程教材选择提供数据支持。\n\n---\n\n## 二、数据采集计划\n\n### 1. 数据来源\n\n* 网址：[https://search.dangdang.com/?key=python\\&act=input\\&sort\\_type=sort\\_sale\\_amt\\_desc#J\\_tab](https://search.dangdang.com/?key=python&act=input&sort_type=sort_sale_amt_desc#J_tab)\n* 请求类型：GET\n* 页数限制：目前仅采集排序后**前 20 本书**\n* 排序方式：**按销量从高到低**\n\n### 2. 待采集字段（建议）\n\n| 字段名       | 说明               |\n| --------- | ---------------- |\n| `书名`      | 完整书名             |\n| `作者`      | 主作者及其他合著者        |\n| `出版社`     | 出版机构             |\n| `出版时间`    | 年份或具体日期          |\n| `原价`      | 划线价              |\n| `折后价`     | 实际售价             |\n| `评论数`     | 用户评论数，反映活跃度      |\n| `星级评分`    | 若有星级则采集          |\n| `封面图链接`   | 便于后续可视化展示        |\n| `图书详情页链接` | 为后续扩展字段或人工校验提供入口 |\n\n---\n\n## 三、分析流程\n\n### Step 1：数据采集（Python 编程）\n\n* 使用库：\n\n  * `requests` 模拟访问\n  * `BeautifulSoup` 解析 HTML\n  * `re` 或 `lxml` 辅助提取字段\n* 反爬措施应对：\n\n  * 合理设置 `headers`（如模拟浏览器 UA）\n  * 增加 `time.sleep()` 随机延迟\n  * 如遇 JavaScript 动态加载，可考虑 `selenium`\n\n### Step 2：数据清洗与规范化\n\n* 作者、出版社等字段统一格式\n* 出版时间转为 `datetime`\n* 价格字段转换为 float\n* 评论数转换为整数（去除“条评论”字样）\n\n### Step 3：数据分析\n\n#### 3.1 描述性统计\n\n* 平均价格、评论数中位数\n* 出版年份分布（近几年为主）\n* 高频作者、出版社统计\n\n#### 3.2 分类分析\n\n* 入门类 vs 进阶类\n* 数据分析 vs Web 编程 vs 机器学习\n* 是否为教材或考试参考书\n\n#### 3.3 排行榜可视化\n\n* 前 10 图书销量/评论/价格对比柱状图\n* 出版时间折线图\n* 价格 vs 评论数散点图\n\n---\n\n## 四、报告输出格式\n\n### 1. 技术报告形式（推荐）\n\n* **格式**：Markdown / Quarto / PDF（可由 Jupyter Notebook 或 Quarto 生成）\n* **结构建议**：\n\n```markdown\n# Python 图书销售市场调研报告（当当网）\n\n## 1. 项目背景与目标\n## 2. 数据采集与字段说明\n## 3. 市场总体概况\n   - 销售 Top20 图书一览\n   - 平均价格、评分、评论数等统计\n## 4. 出版特征分析\n   - 出版社分布、出版时间分布\n   - 作者贡献度分析\n## 5. 图书类型对比分析\n   - 入门、进阶分布\n   - 专业方向分布\n## 6. 结论与建议\n   - 当前趋势总结\n   - 出版或选书建议\n```\n\n### 2. 附录部分\n\n* 原始数据表格（20 本书）\n* 数据采集代码（附说明）\n* 图形可视化汇总图（Matplotlib / Seaborn / Plotly）\n\n---\n\n## 五、可扩展方向（可选）\n\n* 同步采集京东、淘宝图书频道以对比\n* 分析定价策略（原价 vs 折扣价规律）\n* 抽取关键词构建词云图\n* 构建图书推荐系统雏形\n\n---\n\n如你同意，我可以继续为你编写：\n\n1. Python 抓取前 20 条当当网图书数据的爬虫脚本；\n2. 可视化分析和 Markdown 报告生成模板；\n3. 教学型讲义或课程材料用版本。\n\n是否现在开始写代码部分？是否使用 `requests + BeautifulSoup`，还是你希望使用 `selenium` 模拟浏览器？\n\n:::\n\n## 爬取数据\n\n我们让 ChatGPT 执行第一步：\n\n**Step 1：使用 Python 抓取当当网「Python」相关图书销量前 20 名信息** 的完整采集代码。\n\n### 技术选择说明\n\n* **目标网址**：[https://search.dangdang.com/?key=python\\&sort\\_type=sort\\_sale\\_amt\\_desc](https://search.dangdang.com/?key=python&sort_type=sort_sale_amt_desc)\n* **方案**：采用 `requests` + `BeautifulSoup` 进行静态页面解析（当当网图书搜索结果页大部分信息在 HTML 中，JS 渲染较少）\n* **爬取字段**：\n\n  * 书名\n  * 作者\n  * 出版社\n  * 出版时间\n  * 原价\n  * 折后价\n  * 评论数\n  * 商品详情页链接\n\n\n### Python 代码\n\n\n\n\n## 后续\n\n我花了 30 分钟做到目前的样子，基本上搞懂了使用 Copilot 编写 Python 代码实现爬虫的流程。\n\n刚好当时在教授「数据分析与 Python 应用」的课程，我索性把这个案例作为课堂作业，要求学生们完成。\n\n- 作业要求：[T1-当当网Python类图书销售分析](https://github.com/arlionn/ds/blob/main/homework/Topics/T1-%E5%BD%93%E5%BD%93%E7%BD%91Python%E7%B1%BB%E5%9B%BE%E4%B9%A6%E9%94%80%E5%94%AE%E5%88%86%E6%9E%90.md)\n- 学生提交的 Jupyter Notebook：\n  - [当当网-G7-01：爬虫和数据清洗](https://book.lianxh.cn/ds/homework/pre/Dangdang_G7_01_data_clean.html)\n  - [当当网-G7-02：数据分析](https://book.lianxh.cn/ds/homework/pre/Dangdang_G7_02_data_analysis.html)\n","srcMarkdownNoYaml":"\n\n\n\n\n\n\n## 背景\n\n我想写一本有关 Python 应用的书。目前我有很多想法，拿不定主意。比如，\n\n- 目标读者是谁？经管类博士生，还是中小学生？\n- 书的内容是什么？是 Python 基础知识，还是 Python 数据分析？亦或是机器学习？\n- 书的形式是什么？是电子书，还是纸质书？亦或是两者都有？\n- 书的价格是多少？是 50 元，还是 100 元？亦或是 200 元？\n- 找哪家出版社？\n\n在不了解这些信息的情况下，贸然画一年的时间写一本书是一个非常冒险的决定。为了降低风险，我决定先做一些市场调研，看看读者对 Python 书籍的需求。\n\n我先通过百度搜索和 Google 搜索，了解到当当网是中国最大的图书销售网站之一，拥有丰富的图书数据。我决定从当当网获取一些 Python 类图书的销售数据，进行分析，看看读者对 Python 书籍的需求。\n\n问题来了，我只有一些非常基础的 Python 知识 (大体上限于能对着课本或帮助文档提供的实例进行一些微小的修改，然后运行)。而且，我目前掌握的 Python 知识基本上进局限于回归分析。对于网络爬虫、数据分析、数据可视化等知识，我几乎一无所知。\n\n我听说 ChatGPT, DeepSeek 等 AI 工具可以帮助我完成一些复杂的任务，比如网络爬虫、数据分析、数据可视化等。我决定试试这些工具，看看它们能否帮助我完成我的市场调研。\n\n\n\n于是，我写一个提示词，发给了 ChatGPT：\n\n> [与 ChatGPT 的完整对话](https://chatgpt.com/share/6825d453-524c-8005-b82c-a9530cf983ff)\n\n\n::: {.callout-tip}\n### 提示词\n\n```md\n- 目的：从当当网获取Python相关书籍的销售量信息，最终输出一份市场调研报告。\n- 语言：Python\n- 网站：[https://search.dangdang.com/](https://search.dangdang.com/)\n- 关键词：'python'\n- 排序关键词：'销量'\n- 排序方式：从高到低\n- 信息条数：前 20 条\n- 目前搜索结果页面URL：[https://search.dangdang.com/?key=python\\&act=input\\&sort\\_type=sort\\_sale\\_amt\\_desc#J\\_tab](https://search.dangdang.com/?key=python&act=input&sort_type=sort_sale_amt_desc#J_tab)\n\n- 预期输出： \n  - 书名，作者，年份，出版社，评论数，原价、折后价\n\n以上是我目前想到的。\n请帮我做一个全面的规划，包括分析目标、收集那些变量，分析流程，以及最终的报告形式、核心内容等。\n```\n\n:::\n\n以下是 ChatGPT 的回复：\n\n::: {.callout-note}\n### AI 的回复\n\n好的，以下是一份较为系统的规划方案，适用于以 Python 编写程序从当当网采集“Python”相关书籍的销售量数据，并撰写一份结构完整的市场调研报告。\n\n---\n\n# Python 相关图书市场调研项目规划\n\n## 一、分析目标\n\n* **核心问题**：当前在当当网上热销的 Python 图书有哪些？主要出版时间集中在哪些年份？哪些出版社主导了市场？\n* **业务用途**：\n\n  * 为出版商、培训机构、书店提供选书参考；\n  * 了解当前市场偏好（入门/进阶、编程/数据分析/人工智能）；\n  * 为课程教材选择提供数据支持。\n\n---\n\n## 二、数据采集计划\n\n### 1. 数据来源\n\n* 网址：[https://search.dangdang.com/?key=python\\&act=input\\&sort\\_type=sort\\_sale\\_amt\\_desc#J\\_tab](https://search.dangdang.com/?key=python&act=input&sort_type=sort_sale_amt_desc#J_tab)\n* 请求类型：GET\n* 页数限制：目前仅采集排序后**前 20 本书**\n* 排序方式：**按销量从高到低**\n\n### 2. 待采集字段（建议）\n\n| 字段名       | 说明               |\n| --------- | ---------------- |\n| `书名`      | 完整书名             |\n| `作者`      | 主作者及其他合著者        |\n| `出版社`     | 出版机构             |\n| `出版时间`    | 年份或具体日期          |\n| `原价`      | 划线价              |\n| `折后价`     | 实际售价             |\n| `评论数`     | 用户评论数，反映活跃度      |\n| `星级评分`    | 若有星级则采集          |\n| `封面图链接`   | 便于后续可视化展示        |\n| `图书详情页链接` | 为后续扩展字段或人工校验提供入口 |\n\n---\n\n## 三、分析流程\n\n### Step 1：数据采集（Python 编程）\n\n* 使用库：\n\n  * `requests` 模拟访问\n  * `BeautifulSoup` 解析 HTML\n  * `re` 或 `lxml` 辅助提取字段\n* 反爬措施应对：\n\n  * 合理设置 `headers`（如模拟浏览器 UA）\n  * 增加 `time.sleep()` 随机延迟\n  * 如遇 JavaScript 动态加载，可考虑 `selenium`\n\n### Step 2：数据清洗与规范化\n\n* 作者、出版社等字段统一格式\n* 出版时间转为 `datetime`\n* 价格字段转换为 float\n* 评论数转换为整数（去除“条评论”字样）\n\n### Step 3：数据分析\n\n#### 3.1 描述性统计\n\n* 平均价格、评论数中位数\n* 出版年份分布（近几年为主）\n* 高频作者、出版社统计\n\n#### 3.2 分类分析\n\n* 入门类 vs 进阶类\n* 数据分析 vs Web 编程 vs 机器学习\n* 是否为教材或考试参考书\n\n#### 3.3 排行榜可视化\n\n* 前 10 图书销量/评论/价格对比柱状图\n* 出版时间折线图\n* 价格 vs 评论数散点图\n\n---\n\n## 四、报告输出格式\n\n### 1. 技术报告形式（推荐）\n\n* **格式**：Markdown / Quarto / PDF（可由 Jupyter Notebook 或 Quarto 生成）\n* **结构建议**：\n\n```markdown\n# Python 图书销售市场调研报告（当当网）\n\n## 1. 项目背景与目标\n## 2. 数据采集与字段说明\n## 3. 市场总体概况\n   - 销售 Top20 图书一览\n   - 平均价格、评分、评论数等统计\n## 4. 出版特征分析\n   - 出版社分布、出版时间分布\n   - 作者贡献度分析\n## 5. 图书类型对比分析\n   - 入门、进阶分布\n   - 专业方向分布\n## 6. 结论与建议\n   - 当前趋势总结\n   - 出版或选书建议\n```\n\n### 2. 附录部分\n\n* 原始数据表格（20 本书）\n* 数据采集代码（附说明）\n* 图形可视化汇总图（Matplotlib / Seaborn / Plotly）\n\n---\n\n## 五、可扩展方向（可选）\n\n* 同步采集京东、淘宝图书频道以对比\n* 分析定价策略（原价 vs 折扣价规律）\n* 抽取关键词构建词云图\n* 构建图书推荐系统雏形\n\n---\n\n如你同意，我可以继续为你编写：\n\n1. Python 抓取前 20 条当当网图书数据的爬虫脚本；\n2. 可视化分析和 Markdown 报告生成模板；\n3. 教学型讲义或课程材料用版本。\n\n是否现在开始写代码部分？是否使用 `requests + BeautifulSoup`，还是你希望使用 `selenium` 模拟浏览器？\n\n:::\n\n## 爬取数据\n\n我们让 ChatGPT 执行第一步：\n\n**Step 1：使用 Python 抓取当当网「Python」相关图书销量前 20 名信息** 的完整采集代码。\n\n### 技术选择说明\n\n* **目标网址**：[https://search.dangdang.com/?key=python\\&sort\\_type=sort\\_sale\\_amt\\_desc](https://search.dangdang.com/?key=python&sort_type=sort_sale_amt_desc)\n* **方案**：采用 `requests` + `BeautifulSoup` 进行静态页面解析（当当网图书搜索结果页大部分信息在 HTML 中，JS 渲染较少）\n* **爬取字段**：\n\n  * 书名\n  * 作者\n  * 出版社\n  * 出版时间\n  * 原价\n  * 折后价\n  * 评论数\n  * 商品详情页链接\n\n\n### Python 代码\n\n\n\n\n## 后续\n\n我花了 30 分钟做到目前的样子，基本上搞懂了使用 Copilot 编写 Python 代码实现爬虫的流程。\n\n刚好当时在教授「数据分析与 Python 应用」的课程，我索性把这个案例作为课堂作业，要求学生们完成。\n\n- 作业要求：[T1-当当网Python类图书销售分析](https://github.com/arlionn/ds/blob/main/homework/Topics/T1-%E5%BD%93%E5%BD%93%E7%BD%91Python%E7%B1%BB%E5%9B%BE%E4%B9%A6%E9%94%80%E5%94%AE%E5%88%86%E6%9E%90.md)\n- 学生提交的 Jupyter Notebook：\n  - [当当网-G7-01：爬虫和数据清洗](https://book.lianxh.cn/ds/homework/pre/Dangdang_G7_01_data_clean.html)\n  - [当当网-G7-02：数据分析](https://book.lianxh.cn/ds/homework/pre/Dangdang_G7_02_data_analysis.html)\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":true,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"toc-depth":3,"number-sections":true,"highlight-style":"atom-one","css":["../../styles.css"],"output-file":"case_Dangdang_book.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.6.39","editor":"visual","theme":"cosmo","linestretch":1.6,"fontsize":"11.5pt","highlight":true,"callout-appearance":"default","md-extensions":["callout"],"title":"案例：当当网 Python 类图书销售数据分析"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}